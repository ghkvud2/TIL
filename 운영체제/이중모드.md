### 1. 이중 모드

- 여러 명이 하나의 컴퓨터를 사용하거나, 한 사용자가 여러 개의 프로그램을 사용하는 상황에서 필요한 모드이다.

- 한 사람의 실수로 인해 시스템 전체에 전체 영향을 줄 수 있다.

- 치명적인 오류를 방지하기 위해 `프로세서`가 동작하는 모드를 `사용자 모드`와 `관리자 모드`로 나눈다.

  

#### 1-1. 레지스터 플래그

- `사용자 모드`와 `관리자 모드`를 구별하기 위해 `플래그`값을 두어 제어한다.
- 운영체제 서비스가 실행될 때에는 `관리자 모드`, 사용자 프로그램이 실행될 때에는 `사용자 모드` 로 수행될 수 있는 역할을 한다.
- 즉, 인터럽트가 발생하면, 운영체제는 인터럽트 서비스 루틴을 실행되는데 이때, `모니터 비트`가 관리자모드로 변경되고, 인터럽트 서비스 루틴이 끝나면 다시 `모니터 비트`가 사용자 모드로 변경된다.

![](https://t1.daumcdn.net/cfile/tistory/2162E74058F31D3804)

- 만약에, `사용자 모드`에서 관리자 명령어를 실행하게 되면 운영체제는 `모니터 비트`를 확인하고 사용자 모드로 설정되어 있으면, 이 명령어가 잘못되었다고 판단한다.
- 이때, `잘못된 명령어`를 처리하는 `인터럽트 서비스 루틴`을 수행하여 해당 사용자 프로그램을 종료시킨다.



### 2. 입출력 장치 보호

- 다른 사용자와 동시에 입출력 하는 것을 막기 위한 관리자 명령어(`IN`, `OUT`)가 존재한다.
- 사용자 프로그램이 직접 `IN`, `OUT` 명령어를 실행하는 것이 아니라, 운영체제에 `INT` 명령어를 통해 소프트웨어 인터럽트를 발생시킨다.
- 사용자 프로그램에 의해서 요청(인터럽트 발생)받은 운영체제는 입출력을 모두 처리하고 다시 사용자 프로그램으로 되돌린다.

### 3. 메모리 보호

- 임의의 사용자 프로그램이 다른 사용자 프로그램의 메모리 영역이나 운영체제의 메모리 영역을 침범하는 것을 막기 위한 방법이다.
- 허용되지 않는 메모리를 참조하려는 시도를 `Segment violation`이라고 한다.
- 이를 방지하기 위해 `MMU (Memory Management Unit)`을 두어 다른 메모리 영역을 침범하는 것을 감시한다.



#### 3-1. MMU(Memory Management Unit)이란?

- `메모리 관리 장치` 는 CPU가 메모리에 접근하는 것을 관리하는 하드웨어 부품이다.
- `가상 메모리`주소를 `실제 메모리 주소`로 변환하는 역할을 한다.



#### 4. CPU 보호

- 한 사용자 프로그램이 CPU를 독점하는 것을 방지하기 위한 방법이다.
- 일정 시간이 지나면 인터럽트를 발생시키는 `타이머 인터럽트`를 두어 해결할 수 있다.
- `타이머 인터럽트`가 발생하면, CPU는 현재 수행중인 작업을 멈추고 `인터럽트 서비스 루틴`을 실행하는데, 이때 수행되는 내용은 CPU가 현재 여러 사용자 프로그램에 골고루 분배되고 있는지 확인하는 작업을 수행한다.
- 하나의 사용자 프로그램이 CPU를 독점하고 있는 상황이라면, `인터럽트 서비스 루틴`은 강제로 다음 사용자 프로그램에 CPU를 할당한다.

