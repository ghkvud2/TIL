### 1. JDBC란

- JDBC는 자바를 이용해 DB에 접근하는 방법을 추상화된 API 형태로 정의해놓고, 각 DB 벤더가 JDBC 표준을 따라 만들어진 드라이버를 제공하게 해준다.
- 내부 구현은 DB마다 다르겠지만, JDBC의 `Connection, ResultSet, Statement` 등의 표준 인터페이스를 통해 그 기능을 제공해주기 때문에 개발자들은 JDBC의 API에만 익숙해지면 DB의 종류에 상관없이 일관된 방법으로 프로그램을 개발할 수 있다.

---

### 2. JDBC의 한계

- 표준화된 JDBC API가 DB 프로그램을 개발하는 데 필요한 부담을 줄여주기는 하지만, DB를 완벽하게 자유롭게 변경해서 사용할 수 있는 유연한 코드를 보장해주지는 못한다.

#### 2-1. 비표준 SQL

- 첫 번째 문제는 JDBC 코드에서 사용하는 SQL이다.
- SQL은 어느 정도 표준화된 언어이고 몇 가지 표준 규약이 있긴 하지만, 대부분의 DB는 표준을 따르지 않은 비표준 문법과 기능도 제공한다.
- 이러한 비표준 특정 DB 전용 문법은 매우 폭 넓게 사용되고 있다. 그 이유는 해당 DB의 특별한 기능을 사용하거나 최적화된 SQL을 만들 때 유용하기 때문이다.
- 즉, 특별한 기능을 제공하는 SQL을 사용하면 특정 DB에 종속적인 SQL 문장을 작성할 수 밖에 없고 다른 DB로 변경하려면 기존의 코드 (DAO와 같은)의 변경이 불가피하다.



#### 2-2. 호환성 없는 SQLException의 DB 에러정보

- 두 번째 문제는 SQLException이다.
- DB를 사용하다가 발생할 수 있는 예외의 원인은 다양한데, 문제는 DB마다 SQL만 다른 것이 아니라 에러의 종류와 원인도 제각각이라는 점이다.
- 그래서 JDBC는 데이터 처리 중에 발생하는 다양한 예외를 그냥 `SQLException` 하나에 모두 담아버린다.
- 정확한 예외의 원인을 알기 위해서는 `SQLException의 gettErrorCode()`로 가져올 수 있는 DB 에러 코드가 DB 벤더사마다 모두 다르기 때문에 `SQLException`을 가지고 예외를 처리하는 것은 거의 불가능에 가깝다.
- 더 큰 문제는 DB의 JDBC 드라이버에서 `SQLException`을 담을 상태 코드를 정확하게 만들어주지 않는다는 점이다.

---

### 3. DB 에러 코드 매핑을 통한 전환

- DB 종류가 바뀌더라도 기존의 코드 (DAO와 같은)를 바꾸지 않으려면 위의 두 가지 문제를 해결해야 한다.
- `SQLException`에 담긴 에러 상태 코드가 신뢰할만한 수준이 아니므로 고려하지 않는 것이 낫다.
- 해결 방법은, DB별 에러 코드를 참고해서 발생한 예외의 원인이 무엇인지 해석해주는 기능을 만드는 것이다.